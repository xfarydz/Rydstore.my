"use strict";exports.id=145,exports.ids=[145],exports.modules={446:(e,t,a)=>{a.d(t,{Z:()=>c});var l=a(9899),i=a(5507),y=a(781),d=a(3021),s=a(8449);let r=(0,a(4516).Z)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);var n=a(856);function c({isOpen:e,onClose:t,productName:a,productImage:c,productBrand:h,productSize:o,productColor:x,productId:p,amount:m,orderId:k,items:u,onPaymentSuccess:b}){let[g,Z]=(0,i.useState)(!1),[j,v]=(0,i.useState)(!1),{user:f}=(0,y.a)(),{showSuccess:M,showError:w}=(0,d.VY)();if(!e)return null;let N=async()=>{if(!f){w("Authentication Required","Please sign in to proceed with payment");return}Z(!0);try{let e=await fetch("/api/toyyibpay/create-bill",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:m,reference:k,email:f.email,name:f.name,phone:f.phone})}),t=await e.json();if(t.success&&t.billUrl){let e={id:k,productId:p,productName:a,productImage:c,productBrand:h,productSize:o,productColor:x,amount:m,...Array.isArray(u)&&u.length?{items:u}:{},userId:f.id,userName:f.name,userEmail:f.email,userPhone:f.phone,status:"pending",paymentMethod:"toyyibpay",billCode:t.billCode,createdAt:new Date().toISOString()},l=JSON.parse(localStorage.getItem("orders")||"[]");l.push(e),localStorage.setItem("orders",JSON.stringify(l));let i=JSON.parse(localStorage.getItem("adminProducts")||"[]").map(e=>e.id===p?{...e,isSoldOut:!0,inStock:!1,orderId:k}:e);localStorage.setItem("adminProducts",JSON.stringify(i)),window.dispatchEvent(new Event("productUpdated")),v(!0),M("Redirecting to Payment Gateway","You will be redirected to ToyyibPay to complete payment..."),setTimeout(()=>{window.location.href=t.billUrl},2e3)}else w("Payment Setup Failed",t.error||"Failed to create payment bill"),Z(!1)}catch(e){console.error("ToyyibPay error:",e),w("Payment Error","Failed to process payment. Please try again."),Z(!1)}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-[9999] animate-in fade-in-0 duration-200",children:(0,l.jsxs)("div",{style:{animation:"bounce-in 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)"},className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden",children:[l.jsx("div",{className:"bg-black text-white p-6 sticky top-0 z-10",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Secure Payment"}),l.jsx("button",{onClick:t,disabled:g||j,className:"text-white hover:text-gray-300 transition-colors disabled:opacity-50",children:l.jsx(s.Z,{className:"h-6 w-6"})})]})}),(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[(0,l.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[l.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Order Summary"}),(0,l.jsxs)("div",{className:"flex gap-4",children:[l.jsx("img",{src:c,alt:a,className:"w-20 h-20 object-cover rounded-lg"}),(0,l.jsxs)("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium",children:a}),l.jsx("p",{className:"text-sm text-gray-600",children:h}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Size: ",o," • Color: ",x]}),(0,l.jsxs)("p",{className:"text-lg font-bold text-black mt-2",children:["RM ",m.toFixed(2)]})]})]})]}),(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[l.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Secure Payment via ToyyibPay"}),(0,l.jsxs)("ul",{className:"text-sm text-blue-800 space-y-2",children:[l.jsx("li",{children:"✓ Support multiple payment methods (ShopeePay, banks, cards, e-wallets)"}),l.jsx("li",{children:"✓ Instant payment verification"}),l.jsx("li",{children:"✓ Secure encryption by ToyyibPay"}),l.jsx("li",{children:"✓ Your order auto-confirms upon successful payment"})]})]}),l.jsx("button",{onClick:N,disabled:g||j,className:"w-full bg-black text-white py-4 rounded-xl font-semibold hover:bg-gray-800 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center gap-2",children:g?(0,l.jsxs)(l.Fragment,{children:[l.jsx(r,{className:"h-5 w-5 animate-spin"}),"Setting up payment..."]}):j?(0,l.jsxs)(l.Fragment,{children:[l.jsx(n.Z,{className:"h-5 w-5"}),"Redirecting to ToyyibPay..."]}):l.jsx(l.Fragment,{children:"Proceed to Payment"})}),l.jsx("p",{className:"text-xs text-gray-500 text-center",children:"You will be securely redirected to ToyyibPay to complete your payment"})]})]})})}},3818:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1870:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},7061:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},5359:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},2070:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},243:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},3956:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},9587:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},7866:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},7282:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},4950:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},3550:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]])},6234:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},7067:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3290:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]])},519:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3244:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},5465:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},4672:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4342:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},1614:(e,t,a)=>{a.d(t,{Z:()=>l});let l=(0,a(4516).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}};