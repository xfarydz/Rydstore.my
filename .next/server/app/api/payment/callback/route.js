"use strict";(()=>{var e={};e.id=461,e.ids=[461],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},187:(e,a,r)=>{r.r(a),r.d(a,{originalPathname:()=>y,patchFetch:()=>f,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var t={};r.r(t),r.d(t,{GET:()=>l,POST:()=>c});var o=r(3277),s=r(5265),n=r(5356),i=r(7076);async function c(e){try{console.log("\uD83D\uDCE8 ToyyibPay callback received");let a=await e.formData(),r=Object.fromEntries(a.entries());console.log("\uD83D\uDCCB ToyyibPay callback data:",r);let{refno:t,status:o,reason:s,billcode:n,order_id:c,amount:l,billName:u,billEmail:p,billPhone:d}=r;if(console.log("\uD83D\uDCB3 Payment details:",{refno:t,status:o,reason:s,billcode:n,order_id:c,amount:l}),"1"===o)return console.log("✅ Payment successful for order:",c),i.NextResponse.json({status:"success",message:"Payment confirmed",refno:t,order_id:c});return console.log("❌ Payment failed for order:",c,"Reason:",s),i.NextResponse.json({status:"failed",message:"Payment failed",reason:s,order_id:c})}catch(e){return console.error("❌ ToyyibPay callback error:",e),i.NextResponse.json({status:"error",message:"Callback processing failed",error:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function l(e){return i.NextResponse.json({message:"ToyyibPay callback endpoint is active",timestamp:new Date().toISOString()})}let u=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/payment/callback/route",pathname:"/api/payment/callback",filename:"route",bundlePath:"app/api/payment/callback/route"},resolvedPagePath:"C:\\Users\\farid\\Downloads\\FARID WEBSITE\\GITHUB-UPLOAD\\src\\app\\api\\payment\\callback\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:p,staticGenerationAsyncStorage:d,serverHooks:m}=u,y="/api/payment/callback/route";function f(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}}};var a=require("../../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[942,786],()=>r(187));module.exports=t})();