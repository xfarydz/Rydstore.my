"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[866],{8866:function(e,t,s){s.d(t,{Z:function(){return U}});var a=s(7821),r=s(7729),l=s(2942),o=s(432),i=s(9198),n=s(6515),c=s(7419),d=s(6556),m=s(3392),x=s(8078),u=s(3222),h=s(6492),g=s(3747),p=s(3116),f=s(7737);function b(e){let{isOpen:t,onClose:s}=e,{user:r}=(0,h.a)(),{settings:l}=(0,u.h)(),[o,i]=(0,x.useState)([]),[n,d]=(0,x.useState)(null),[m,g]=(0,x.useState)("");(0,x.useEffect)(()=>{t&&r&&b()},[t,r]);let b=()=>{i([])},N=()=>{if(!m.trim()||!n||!r)return;let e={id:Date.now().toString(),senderId:r.id,senderName:r.name,senderType:"customer",message:m.trim(),timestamp:new Date().toISOString()};i(t=>t.map(t=>t.id===n?{...t,messages:[...t.messages,e]}:t)),g("")};if(!t)return null;let y=o.find(e=>e.id===n);return(0,a.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 w-80 h-96 flex flex-col animate-slideIn",children:[(0,a.jsx)("div",{className:"p-3 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-blue-100 rounded-t-2xl",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-blue-600"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 text-sm",children:"Messages"}),o.length>0&&(0,a.jsx)("span",{className:"bg-blue-600 text-white text-xs px-2 py-0.5 rounded-full",children:o.length})]}),(0,a.jsx)("button",{onClick:s,className:"p-1 hover:bg-blue-200 rounded-full transition-colors",children:(0,a.jsx)(p.Z,{className:"w-4 h-4 text-gray-600"})})]})}),n?(0,a.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,a.jsxs)("div",{className:"p-3 border-b border-gray-100 bg-gray-50",children:[(0,a.jsx)("button",{onClick:()=>d(null),className:"flex items-center text-sm text-blue-600 hover:text-blue-800 mb-2",children:"← Back to conversations"}),y&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("img",{src:y.productImage,alt:y.productName,className:"w-8 h-8 object-cover rounded-lg"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-sm text-gray-900",children:y.productName}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Offer: ",l.currency,y.offeredPrice.toLocaleString()]})]})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:(null==y?void 0:y.messages.length)?y.messages.map(e=>(0,a.jsx)("div",{className:"flex ".concat(e.senderId===(null==r?void 0:r.id)?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-[80%] p-2 rounded-lg text-sm ".concat(e.senderId===(null==r?void 0:r.id)?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"),children:[(0,a.jsx)("p",{children:e.message}),(0,a.jsx)("p",{className:"text-xs mt-1 ".concat(e.senderId===(null==r?void 0:r.id)?"text-blue-200":"text-gray-500"),children:new Date(e.timestamp).toLocaleTimeString()})]})},e.id)):(0,a.jsxs)("div",{className:"text-center text-gray-500 text-sm",children:[(0,a.jsx)("p",{children:"No messages yet"}),(0,a.jsx)("p",{className:"text-xs",children:"Start the conversation!"})]})}),(0,a.jsx)("div",{className:"p-3 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:m,onChange:e=>g(e.target.value),placeholder:"Type a message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:e=>{"Enter"===e.key&&N()}}),(0,a.jsx)("button",{onClick:N,className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition-colors",children:(0,a.jsx)(f.Z,{className:"w-4 h-4"})})]})})]}):(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===o.length?(0,a.jsxs)("div",{className:"p-6 text-center text-gray-500 h-full flex flex-col justify-center",children:[(0,a.jsx)(c.Z,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,a.jsx)("p",{className:"font-medium",children:"No messages yet"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Make an offer to start chatting!"})]}):(0,a.jsx)("div",{className:"p-2",children:o.map(e=>(0,a.jsx)("button",{onClick:()=>d(e.id),className:"w-full p-3 text-left hover:bg-gray-50 rounded-lg transition-colors mb-2 border border-transparent hover:border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:e.productImage,alt:e.productName,className:"w-10 h-10 object-cover rounded-lg flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 truncate text-sm",children:e.productName}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Offer: ",l.currency,e.offeredPrice.toLocaleString()]}),(0,a.jsxs)("p",{className:"text-xs text-blue-600",children:[e.messages.length," messages"]})]})]})},e.id))})})]})})}var N=s(8149),y=s(3955),j=s(2133),v=s(2828),w=s(555),k=s(2531),S=s(1996),C=s(6922),D=s(7315),I=s(2465),P=s(9024),L=s(5744);function O(e){let{isOpen:t,onClose:s,productName:r,productImage:l,productBrand:o,productSize:i,productColor:n,productId:c,amount:d,orderId:m,onPaymentSuccess:g}=e,[f,b]=(0,x.useState)(""),[y,j]=(0,x.useState)(!1),[v,w]=(0,x.useState)(""),{user:S,addNotification:O}=(0,h.a)(),{settings:E}=(0,u.h)(),{showSuccess:Z,showError:A}=(0,L.VY)(),M=E.bankAccountNumber&&E.bankName?[{bank:E.bankName,accountNumber:E.bankAccountNumber,accountName:E.bankAccountName||"Account Holder"}]:void 0,T=E.bankQrUrl||"";if(!t)return null;let R=(e,t)=>{navigator.clipboard.writeText(e).then(()=>{w(t),setTimeout(()=>w(""),2e3)})},J=e=>{navigator.clipboard.writeText(e).then(()=>{w("ref"),setTimeout(()=>w(""),2e3)})};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-[9999] animate-in fade-in-0 duration-200",children:(0,a.jsxs)("div",{style:{animation:"bounce-in 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)"},className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden animate-in zoom-in-95 slide-in-from-bottom-4 duration-300 max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"bg-black text-white p-6 sticky top-0 z-10",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Complete Payment"}),(0,a.jsx)("button",{onClick:s,className:"text-white hover:text-gray-300 transition-colors",children:(0,a.jsx)(p.Z,{className:"h-6 w-6"})})]})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-3",children:"Order Summary"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("img",{src:l,alt:r,className:"w-20 h-20 object-cover rounded-lg"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:r}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:o}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Size: ",i," • Color: ",n]}),(0,a.jsxs)("p",{className:"text-lg font-bold text-black mt-2",children:["RM ",d.toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-300 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 border border-gray-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Amount to pay"}),(0,a.jsxs)("p",{className:"font-bold text-lg",children:["RM ",d.toFixed(2)]})]}),(0,a.jsx)("button",{onClick:()=>J(d.toFixed(2)),className:"px-3 py-1.5 text-sm bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:"ref"===v?"Copied":"Copy"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 border border-gray-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Payment reference"}),(0,a.jsx)("p",{className:"font-mono font-semibold",children:m})]}),(0,a.jsx)("button",{onClick:()=>J(m),className:"px-3 py-1.5 text-sm bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:"ref"===v?"Copied":"Copy"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(C.Z,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Bank Transfer Details"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-sm text-blue-800 mb-3",children:"Transfer the exact amount to one of the accounts below:"}),(M||[{bank:"Maybank",accountNumber:"1234567890",accountName:"RYDSTORE SDN BHD"},{bank:"CIMB Bank",accountNumber:"9876543210",accountName:"RYDSTORE SDN BHD"}]).map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-3 last:mb-0",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsx)("p",{className:"font-bold text-lg",children:e.bank})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Account Number:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"font-mono font-bold",children:e.accountNumber}),(0,a.jsx)("button",{onClick:()=>R(e.accountNumber,e.bank),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Copy account number",children:v===e.bank?(0,a.jsx)(N.Z,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(D.Z,{className:"h-4 w-4 text-gray-600"})})]})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Account Name: ",(0,a.jsx)("span",{className:"font-semibold",children:e.accountName})]})]})]},t)),(0,a.jsxs)("div",{className:"mt-4 bg-white rounded-lg p-4 border border-dashed border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(I.Z,{className:"h-5 w-5 text-purple-600"}),(0,a.jsx)("p",{className:"font-semibold",children:"Scan & Pay (Optional)"})]}),T?(0,a.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,a.jsx)("p",{children:"Scan this DuitNow/static QR for faster payment. Please key in the exact amount and add the payment reference in remark."}),(0,a.jsx)("img",{src:T,alt:"DuitNow QR",className:"w-40 h-40 object-contain rounded-lg border border-gray-200"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Tip: Replace the QR image at ","public".concat(T)," with your own bank-generated static QR."]})]}):(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Add your bank static QR (DuitNow) by placing an image at ",(0,a.jsxs)("code",{className:"font-mono",children:["public",T]}),". Customers can scan & pay then upload receipt."]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P.Z,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Upload Payment Receipt"})]}),(0,a.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-black transition-colors",children:f?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("img",{src:f,alt:"Receipt",className:"max-h-48 mx-auto rounded-lg"}),(0,a.jsxs)("p",{className:"text-sm text-green-600 font-medium flex items-center justify-center gap-2",children:[(0,a.jsx)(k.Z,{className:"h-4 w-4"}),"Receipt uploaded successfully"]}),(0,a.jsx)("button",{onClick:()=>b(""),className:"text-sm text-red-600 hover:underline",children:"Remove & upload different receipt"})]}):(0,a.jsxs)("label",{className:"cursor-pointer",children:[(0,a.jsx)(P.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,a.jsx)("p",{className:"font-medium mb-1",children:"Click to upload receipt"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"PNG, JPG up to 5MB"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!s)return;if(!s.type.startsWith("image/")){A("Invalid File","Please upload an image file (JPG, PNG, etc.)");return}if(s.size>5242880){A("File Too Large","Please upload an image smaller than 5MB");return}j(!0);let a=new FileReader;a.onloadend=()=>{b(a.result),j(!1)},a.onerror=()=>{A("Upload Failed","Failed to read the file. Please try again."),j(!1)},a.readAsDataURL(s)},className:"hidden",disabled:y})]})})]}),(0,a.jsxs)("button",{onClick:()=>{if(!f){A("Receipt Required","Please upload your payment receipt to continue.");return}let e={id:m,productId:c,productName:r,productImage:l,productBrand:o,productSize:i,productColor:n,amount:d,userId:null==S?void 0:S.id,userName:null==S?void 0:S.name,userEmail:null==S?void 0:S.email,userPhone:null==S?void 0:S.phone,receipt:f,status:"pending",paymentMethod:"bank_transfer",createdAt:new Date().toISOString(),paidAt:new Date().toISOString()},t=JSON.parse(localStorage.getItem("orders")||"[]");t.push(e),localStorage.setItem("orders",JSON.stringify(t));let a=JSON.parse(localStorage.getItem("adminProducts")||"[]").map(e=>e.id===c?{...e,isSoldOut:!0,inStock:!1,soldAt:new Date().toISOString(),soldTo:null==S?void 0:S.id,orderId:m}:e);localStorage.setItem("adminProducts",JSON.stringify(a)),window.dispatchEvent(new Event("productUpdated"));try{O({type:"payment_required",title:"Order Submitted",message:"Your order #".concat(m," has been submitted. We'll verify your payment shortly."),productId:c,productName:r})}catch(e){console.log("Notification skipped")}Z("Order Submitted Successfully!","Order #".concat(m," is being processed. You'll be notified once payment is verified.")),g(),s()},disabled:!f||y,className:"w-full bg-black text-white py-4 rounded-xl font-semibold hover:bg-gray-800 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center gap-2",children:[(0,a.jsx)(k.Z,{className:"h-5 w-5"}),"Submit Order & Receipt"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Your order will be processed once payment is verified by our team (usually within 24 hours)"})]})]})})}function E(e){let{isOpen:t,onClose:s,offer:r}=e,[l,o]=(0,x.useState)(!1),{user:i}=(0,h.a)(),{showSuccess:n}=(0,L.VY)();if(!t)return null;let c=()=>{let e=JSON.parse(localStorage.getItem("adminProducts")||"[]").map(e=>{if(e.id===r.productId){var t;return{...e,isSoldOut:!0,soldQuantity:(e.soldQuantity||0)+1,offers:null===(t=e.offers)||void 0===t?void 0:t.map(e=>e.id===r.id?{...e,status:"completed",paidAt:new Date().toISOString()}:e)}}return e});if(localStorage.setItem("adminProducts",JSON.stringify(e)),i){let e=JSON.parse(localStorage.getItem("notifications_".concat(i.id))||"[]"),t={id:"notification-"+Date.now(),userId:i.id,type:"payment_success",title:"Purchase Complete! \uD83C\uDF89",message:"You have successfully purchased ".concat(r.productName," for RM").concat(r.offeredPrice.toLocaleString(),". The item will be shipped to you soon!"),productId:r.productId,productName:r.productName,isRead:!1,createdAt:new Date().toISOString()};e.unshift(t),localStorage.setItem("notifications_".concat(i.id),JSON.stringify(e))}o(!1),n("Payment Successful!","Your item has been purchased and will be shipped soon. Thank you for your purchase!"),s()};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Offer Status Update"}),(0,a.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,a.jsx)(p.Z,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"p-6 border-b bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("img",{src:r.productImage,alt:r.productName,className:"w-20 h-20 object-cover rounded-lg"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900",children:r.productName}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Original Price: RM",r.originalPrice.toLocaleString()]}),(0,a.jsxs)("p",{className:"text-lg font-bold text-green-600",children:["Your Offer: RM",r.offeredPrice.toLocaleString()]}),(0,a.jsxs)("p",{className:"text-sm text-green-600",children:["You save: RM",(r.originalPrice-r.offeredPrice).toLocaleString()]})]})]})]})}),(0,a.jsxs)("div",{className:"p-6",children:["accepted"===r.status&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(k.Z,{className:"w-8 h-8 text-green-600"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-green-600 mb-2",children:"Offer Accepted! \uD83C\uDF89"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Great news! The admin has accepted your offer. You can now proceed with the payment to complete your purchase."}),(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(S.Z,{className:"w-5 h-5 text-yellow-600"}),(0,a.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"Payment Required"})]}),(0,a.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"Please complete your payment within 24 hours to secure this item."})]}),(0,a.jsxs)("button",{onClick:()=>{o(!0)},className:"w-full bg-gradient-to-r from-green-600 to-green-700 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-green-800 transition-all shadow-lg",children:["Pay Now - RM",r.offeredPrice.toLocaleString()]})]}),"rejected"===r.status&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(p.Z,{className:"w-8 h-8 text-red-600"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-red-600 mb-2",children:"Offer Not Accepted"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Unfortunately, your offer was not accepted this time. You can try making a different offer or purchase at the listed price."}),(0,a.jsx)("button",{onClick:s,className:"w-full bg-gray-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-700 transition-all",children:"Close"})]}),"pending"===r.status&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(v.Z,{className:"w-8 h-8 text-blue-600"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-blue-600 mb-2",children:"Offer Under Review"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Your offer is currently being reviewed by our team. You will receive a notification once there's an update."}),(0,a.jsx)("button",{onClick:s,className:"w-full bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-all",children:"Close"})]})]})]})}),(0,a.jsx)(O,{isOpen:l,onClose:()=>o(!1),productName:r.productName,productImage:r.productImage,productBrand:"Unknown",productSize:"One Size",productColor:"Default",productId:r.productId||r.id,amount:r.offeredPrice,orderId:"offer-".concat(r.id),onPaymentSuccess:()=>{c()}})]})}function Z(){let[e,t]=(0,x.useState)(!1),[s,l]=(0,x.useState)(null),[o,i]=(0,x.useState)(!1),{notifications:n,unreadCount:c,markNotificationAsRead:d,clearNotifications:m}=(0,h.a)();(0,x.useEffect)(()=>{let s=s=>{"Escape"===s.key&&e&&t(!1)};if(e)return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[e]);let u=e=>{if(d(e.id),"payment_success"===e.type){t(!1),console.log("Purchase success notification clicked:",e);return}if(("offer_accepted"===e.type||"offer_rejected"===e.type)&&e.offerId){var s;let a=JSON.parse(localStorage.getItem("adminProducts")||"[]").find(t=>t.id===e.productId),r=null==a?void 0:null===(s=a.offers)||void 0===s?void 0:s.find(t=>t.id===e.offerId);r&&a&&(l({id:r.id,productId:a.id,productName:a.name,productImage:a.image,offeredPrice:r.offeredPrice,status:r.status,originalPrice:a.price}),i(!0),t(!1))}},g=(e,s)=>{if(s.preventDefault(),s.stopPropagation(),d(e.id),e.offerId){var a;let s=JSON.parse(localStorage.getItem("adminProducts")||"[]").find(t=>t.id===e.productId),r=null==s?void 0:null===(a=s.offers)||void 0===a?void 0:a.find(t=>t.id===e.offerId);r&&s&&(l({id:r.id,productId:s.id,productName:s.name,productImage:s.image,offeredPrice:r.offeredPrice,status:r.status,originalPrice:s.price}),i(!0),t(!1))}},p=e=>{switch(e){case"offer_accepted":return(0,a.jsx)(N.Z,{className:"w-5 h-5 text-green-600"});case"offer_rejected":return(0,a.jsx)(y.Z,{className:"w-5 h-5 text-red-600"});case"payment_required":return(0,a.jsx)(j.Z,{className:"w-5 h-5 text-blue-600"});case"payment_success":return(0,a.jsx)(r.Z,{className:"w-5 h-5 text-green-600"});default:return(0,a.jsx)(v.Z,{className:"w-5 h-5 text-gray-600"})}};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>t(!e),className:"relative p-2 text-gray-600 hover:text-black hover:bg-gray-100 rounded-full transition-all duration-200 ".concat(e?"bg-gray-100 text-black":""," ").concat(c>0?"animate-pulse":""),title:"Notifications",children:[(0,a.jsx)(w.Z,{className:"w-6 h-6 transition-transform duration-200 ".concat(e?"rotate-12":"")}),c>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center animate-bounce",children:c>9?"9+":c})]}),e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>t(!1)}),(0,a.jsxs)("div",{className:"absolute right-0 top-12 w-80 bg-white rounded-lg shadow-xl border z-50 max-h-96 overflow-hidden animate-in slide-in-from-top-2 fade-in-0 duration-200",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:"absolute -top-2 right-3 w-4 h-4 bg-white border-l border-t transform rotate-45 z-10"}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),n.length>0&&(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),m()},className:"text-sm text-blue-600 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded px-2 py-1",children:"Clear All"})]}),(0,a.jsx)("div",{className:"max-h-80 overflow-y-auto notification-scroll",children:0===n.length?(0,a.jsxs)("div",{className:"p-6 text-center text-gray-500",children:[(0,a.jsx)(w.Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),(0,a.jsx)("p",{children:"No notifications yet"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:n.map(e=>(0,a.jsx)("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-all duration-200 border-l-4 ".concat(e.isRead?"border-l-transparent hover:border-l-gray-300":"bg-blue-50 border-l-blue-500 hover:bg-blue-100"),onClick:t=>{t.preventDefault(),t.stopPropagation(),u(e)},children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 mt-1",children:p(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["payment_success"===e.type&&(0,a.jsx)("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded-full flex-shrink-0",children:"SOLD OUT"}),!e.isRead&&(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full flex-shrink-0"})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),"payment_success"===e.type&&(0,a.jsx)("div",{className:"mt-2 p-2 bg-green-50 rounded-md",children:(0,a.jsxs)("p",{className:"text-xs text-green-700 font-medium",children:["Product: ",e.productName]})}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:new Date(e.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})}),"offer_accepted"===e.type&&(0,a.jsx)("button",{onClick:t=>g(e,t),className:"mt-3 w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white text-xs font-medium py-2.5 px-3 rounded-md transition-all duration-200 transform hover:scale-105 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"\uD83D\uDCB3 Pay Now"})]})]})},e.id))})})]})]}),s&&(0,a.jsx)(E,{isOpen:o,onClose:()=>{i(!1),l(null)},offer:s})]})}var A=s(586);function M(e){let{onClose:t}=e,[s,r]=(0,x.useState)([]),[l,o]=(0,x.useState)(null),[i,n]=(0,x.useState)(!1),{user:c}=(0,h.a)(),{settings:d}=(0,u.h)();(0,x.useEffect)(()=>{if(!c)return;let e=JSON.parse(localStorage.getItem("adminProducts")||"[]"),t=[];e.forEach(e=>{e.offers&&e.offers.forEach(s=>{s.userId===c.id&&t.push({...s,productId:e.id,productName:e.name,productImage:e.image,originalPrice:e.price})})}),t.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),r(t)},[c]);let m=e=>{switch(e){case"pending":return(0,a.jsx)(S.Z,{className:"w-5 h-5 text-yellow-600"});case"accepted":return(0,a.jsx)(N.Z,{className:"w-5 h-5 text-green-600"});case"rejected":return(0,a.jsx)(p.Z,{className:"w-5 h-5 text-red-600"});case"completed":return(0,a.jsx)(A.Z,{className:"w-5 h-5 text-blue-600"});default:return(0,a.jsx)(S.Z,{className:"w-5 h-5 text-gray-600"})}},g=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"accepted":return"bg-green-100 text-green-800 border-green-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=e=>{o(e),n(!0)};if(!c){let e=(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Please login to view your offers."}),t&&(0,a.jsx)("button",{onClick:t,className:"mt-4 px-4 py-2 bg-black text-white rounded hover:bg-gray-800 transition-colors",children:"Close"})]});return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:e})}):e}let b=(0,a.jsxs)("div",{className:t?"p-6":"max-w-4xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"My Offers"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[s.length," total offers"]}),t&&(0,a.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(p.Z,{className:"w-6 h-6"})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(S.Z,{className:"w-5 h-5 text-yellow-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"Pending"}),(0,a.jsx)("p",{className:"text-lg font-bold text-yellow-900",children:s.filter(e=>"pending"===e.status).length})]})]})}),(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(N.Z,{className:"w-5 h-5 text-green-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Accepted"}),(0,a.jsx)("p",{className:"text-lg font-bold text-green-900",children:s.filter(e=>"accepted"===e.status).length})]})]})}),(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5 text-red-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Rejected"}),(0,a.jsx)("p",{className:"text-lg font-bold text-red-900",children:s.filter(e=>"rejected"===e.status).length})]})]})}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(A.Z,{className:"w-5 h-5 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Purchased"}),(0,a.jsx)("p",{className:"text-lg font-bold text-blue-900",children:s.filter(e=>"completed"===e.status).length})]})]})})]}),0===s.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,a.jsx)(A.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No offers yet"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Start browsing products and make your first offer!"})]}):(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>f(e),children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("img",{src:e.productImage,alt:e.productName,className:"w-16 h-16 object-cover rounded-lg"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:e.productName}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Your Offer: "}),(0,a.jsxs)("span",{className:"font-semibold text-lg text-blue-600",children:[d.currency,e.offeredPrice.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Original Price: ",d.currency,e.originalPrice.toLocaleString(),(0,a.jsxs)("span",{className:"text-green-600 ml-2",children:["(Save ",d.currency,(e.originalPrice-e.offeredPrice).toLocaleString(),")"]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(e.createdAt).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1 px-3 py-1 rounded-full border text-sm font-medium ".concat(g(e.status)),children:[m(e.status),(0,a.jsx)("span",{children:"completed"===e.status?"PURCHASED ✅":e.status.toUpperCase()})]}),"accepted"===e.status&&(0,a.jsxs)("button",{onClick:t=>{t.stopPropagation(),f(e)},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center space-x-1",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Pay Now"})]}),"completed"===e.status&&e.paidAt&&(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Paid: ",new Date(e.paidAt).toLocaleDateString()]})]})]}),e.message&&(0,a.jsx)("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:['"',e.message,'"']})})]})]})},e.id))}),l&&(0,a.jsx)(E,{isOpen:i,onClose:()=>{n(!1),o(null);let e=JSON.parse(localStorage.getItem("adminProducts")||"[]"),t=[];e.forEach(e=>{e.offers&&e.offers.forEach(s=>{s.userId===c.id&&t.push({...s,productId:e.id,productName:e.name,productImage:e.image,originalPrice:e.price})})}),t.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),r(t)},offer:l})]});return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:b})}):b}function T(){let[e,t]=(0,x.useState)([]),[s,r]=(0,x.useState)(!1),[l,o]=(0,x.useState)(0);(0,x.useEffect)(()=>{i();let e=()=>{setTimeout(i,1e3)};return window.addEventListener("productUpdated",e),()=>window.removeEventListener("productUpdated",e)},[]);let i=()=>{try{let e=JSON.parse(localStorage.getItem("newsletterNotifications")||"[]"),s=n();if(s){let a=e.filter(e=>e.recipients&&e.recipients.includes(s));t(a.reverse());let r=JSON.parse(localStorage.getItem("dismissedNotifications")||"[]"),l=new Date(Date.now()-864e5).toISOString(),i=a.filter(e=>e.sentAt>l&&!r.includes(e.id));o(i.length)}}catch(e){console.error("Error loading notifications:",e)}},n=()=>{try{let e=JSON.parse(localStorage.getItem("newsletterEmails")||"[]"),t=JSON.parse(localStorage.getItem("currentUser")||"{}");if(t.email)return e.some(e=>e.email===t.email)?t.email:null;return null}catch(e){return null}},c=e=>{try{let t=JSON.parse(localStorage.getItem("dismissedNotifications")||"[]");t.push(e),localStorage.setItem("dismissedNotifications",JSON.stringify(t)),o(e=>Math.max(0,e-1))}catch(e){console.error("Error dismissing notification:",e)}};return n()?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>r(!0),className:"relative p-2 text-gray-600 hover:text-black hover:bg-gray-100 rounded-full transition-all",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5"}),l>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:l>9?"9+":l})]}),s&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[80vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,a.jsx)("h3",{className:"text-lg font-bold",children:"New Arrivals"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[l>0&&(0,a.jsx)("button",{onClick:()=>{try{let t=JSON.parse(localStorage.getItem("dismissedNotifications")||"[]");e.forEach(e=>{t.includes(e.id)||t.push(e.id)}),localStorage.setItem("dismissedNotifications",JSON.stringify(t)),o(0)}catch(e){console.error("Error dismissing all notifications:",e)}},className:"text-xs text-gray-500 hover:text-gray-700",children:"Mark all read"}),(0,a.jsx)("button",{onClick:()=>r(!1),className:"p-1 hover:bg-gray-100 rounded",children:(0,a.jsx)(p.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{className:"overflow-y-auto max-h-96",children:e.length>0?(0,a.jsx)("div",{className:"divide-y",children:e.map(e=>(0,a.jsx)("div",{className:"p-4 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:e.productImage,alt:e.productName,className:"w-12 h-12 rounded object-cover"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.productName}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.productBrand}),(0,a.jsxs)("p",{className:"text-sm font-bold text-black",children:["RM",e.productPrice]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:new Date(e.sentAt).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("button",{onClick:()=>{r(!1),window.location.href="/product/".concat(e.productId)},className:"text-xs bg-black text-white px-2 py-1 rounded hover:bg-gray-800",children:"View"}),(0,a.jsx)("button",{onClick:()=>c(e.id),className:"text-xs text-gray-500 hover:text-gray-700",children:"Dismiss"})]})]})},e.id))}):(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(w.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,a.jsx)("p",{children:"No new arrivals yet"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"You'll be notified when new products are added!"})]})})]})})]}):null}function R(){let[e,t]=(0,x.useState)(0),[s,l]=(0,x.useState)(!1);(0,x.useEffect)(()=>{l(!0);let e=()=>{let e=JSON.parse(localStorage.getItem("shoppingCart")||"[]").reduce((e,t)=>e+t.quantity,0);console.log("\uD83D\uDED2 Cart count updated:",e),t(e)};return e(),window.addEventListener("storage",e),window.addEventListener("cartUpdated",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("cartUpdated",e)}},[]);let o=()=>{console.log("\uD83D\uDED2 Cart button clicked! Navigating to /cart"),window.location.href="/cart"};return s?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:o,className:"p-3 text-gray-600 hover:text-white hover:bg-black rounded-lg transition-all duration-200 border border-gray-200 hover:border-black shadow-sm group",children:(0,a.jsx)(r.Z,{className:"h-6 w-6 group-hover:scale-110 transition-transform"})}),e>0&&(0,a.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-bold animate-pulse shadow-lg",children:e>99?"99+":e})]}):(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:o,className:"p-3 text-gray-600 hover:text-white hover:bg-black rounded-lg transition-all duration-200 border border-gray-200 hover:border-black shadow-sm",children:(0,a.jsx)(r.Z,{className:"h-6 w-6"})}),(0,a.jsx)("span",{className:"absolute -top-2 -right-2 bg-black text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-bold shadow-lg",children:"0"})]})}function J(e){let{user:t,isAuthenticated:s}=e,[r,l]=(0,x.useState)(0),[o,i]=(0,x.useState)(!1);return((0,x.useEffect)(()=>{i(!0);let e=()=>{let e=s&&(null==t?void 0:t.id)?"favorites_".concat(t.id):"favorites";l(JSON.parse(localStorage.getItem(e)||"[]").length)};return e(),window.addEventListener("storage",e),window.addEventListener("favoriteChanged",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("favoriteChanged",e)}},[s,null==t?void 0:t.id]),o&&0!==r)?(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:r>99?"99+":r}):null}function U(){let[e,t]=(0,x.useState)(!1),[s,p]=(0,x.useState)(!1),[f,N]=(0,x.useState)(!1),[y,j]=(0,x.useState)(!1),[v,w]=(0,x.useState)(!1),[k,S]=(0,x.useState)(""),[C,D]=(0,x.useState)([]),[I,P]=(0,x.useState)(!1),{settings:L,isLoaded:O}=(0,u.h)(),{user:E,isAuthenticated:A,isInitialized:U,logout:z,setShowAuthModal:B}=(0,h.a)(),Q=e=>{if(S(e),e.trim().length<2){D([]),P(!1);return}D(g.RB.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.brand.toLowerCase().includes(e.toLowerCase())||t.category.toLowerCase().includes(e.toLowerCase())).slice(0,6)),P(!0)},_=e=>{e.preventDefault(),k.trim()&&(window.location.href="/shop?search=".concat(encodeURIComponent(k.trim())),p(!1),P(!1))},Y=e=>{window.location.href="/product/".concat(e),p(!1),P(!1)};return(0,x.useEffect)(()=>{let e=e=>{var t;!s||(null===(t=e.target)||void 0===t?void 0:t.closest(".search-container"))||P(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[s]),(0,a.jsx)("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-20",children:[(0,a.jsxs)("div",{className:"flex-shrink-0",children:[O&&L.logoUrl&&""!==L.logoUrl?(0,a.jsx)("img",{src:L.logoUrl.includes("data:image")?L.logoUrl:"".concat(L.logoUrl,"?v=").concat(Date.now()),alt:"".concat(L.storeName," Logo"),className:"h-8 sm:h-10 md:h-12 w-auto object-contain cursor-pointer",loading:"eager",onClick:()=>window.location.href="/",onError:e=>{console.error("❌ Logo failed to load"),console.error("Logo URL type:",L.logoUrl.includes("data:")?"base64":"file path"),console.error("Logo URL length:",L.logoUrl.length),e.target.style.display="none";let t=e.target.nextElementSibling;t&&t.classList.remove("hidden")},onLoad:()=>{console.log("✅ Logo loaded successfully"),console.log("Logo type:",L.logoUrl.includes("data:")?"base64 image":"file: "+L.logoUrl)}},L.logoUrl.substring(0,50)):null,(0,a.jsx)("div",{className:"flex items-center cursor-pointer ".concat(O&&L.logoUrl&&""!==L.logoUrl?"hidden":""),onClick:()=>window.location.href="/",children:(0,a.jsx)("span",{className:"text-xl font-bold text-black font-display",children:L.storeName})})]}),(0,a.jsxs)("nav",{className:"hidden lg:flex items-center space-x-10",children:[(0,a.jsx)("a",{href:"/",className:"text-gray-800 hover:text-black font-semibold transition-colors text-sm tracking-wide",children:"HOME"}),(0,a.jsx)("a",{href:"/new-arrivals",className:"text-gray-800 hover:text-black font-semibold transition-colors text-sm tracking-wide",children:"NEW ARRIVALS"}),(0,a.jsx)("a",{href:"/live-bidding",className:"text-gray-800 hover:text-black font-semibold transition-colors text-sm tracking-wide",children:"BIDDING"}),(0,a.jsx)("a",{href:"/shop",className:"text-gray-800 hover:text-black font-semibold transition-colors text-sm tracking-wide",children:"SHOP ALL"}),(0,a.jsx)("a",{href:"/sold-items",className:"text-gray-800 hover:text-black font-semibold transition-colors text-sm tracking-wide",children:"SOLD ITEMS"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsx)("button",{onClick:()=>p(!s),className:"p-2 text-gray-600 hover:text-black hover:bg-gray-100 rounded-full transition-all",children:(0,a.jsx)(l.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("button",{onClick:()=>window.location.href="/favorites",className:"relative p-2 text-gray-600 hover:text-black hover:bg-gray-100 rounded-full transition-all",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5"}),(0,a.jsx)(J,{user:E,isAuthenticated:A})]}),U&&A&&(0,a.jsx)(Z,{}),U&&A?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>N(!f),className:"flex items-center space-x-2 p-2 text-gray-600 hover:text-black hover:bg-gray-100 rounded-full transition-all",children:[(0,a.jsx)(i.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"hidden md:block text-sm font-medium",children:null==E?void 0:E.name})]}),f&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border z-50",children:[(0,a.jsxs)("div",{className:"p-4 border-b",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:null==E?void 0:E.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:null==E?void 0:E.email})]}),(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsxs)("a",{href:"/profile",className:"flex items-center w-full px-4 py-2 text-left text-gray-700 hover:bg-gray-100",onClick:()=>N(!1),children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 mr-3"}),"My Profile"]}),(0,a.jsxs)("a",{href:"/my-purchases",className:"flex items-center w-full px-4 py-2 text-left text-gray-700 hover:bg-gray-100",onClick:()=>N(!1),children:[(0,a.jsx)(r.Z,{className:"h-4 w-4 mr-3"}),"My Purchases"]}),(0,a.jsxs)("button",{onClick:()=>{w(!0),N(!1)},className:"flex items-center w-full px-4 py-2 text-left text-gray-700 hover:bg-gray-100",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 mr-3"}),"My Offers"]}),(0,a.jsxs)("button",{onClick:()=>{j(!0),N(!1)},className:"flex items-center w-full px-4 py-2 text-left text-gray-700 hover:bg-gray-100",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-3"}),"Chat Messages"]}),(0,a.jsxs)("button",{onClick:()=>{z(),N(!1)},className:"flex items-center w-full px-4 py-2 text-left text-red-600 hover:bg-gray-100",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-3"}),"Logout"]})]})]})]}):U?(0,a.jsx)("button",{onClick:()=>B(!0),className:"p-2 text-gray-600 hover:text-black hover:bg-gray-100 rounded-full transition-all",children:(0,a.jsx)(i.Z,{className:"h-5 w-5"})}):(0,a.jsx)("div",{className:"p-2 w-10 h-10"}),U&&A&&(0,a.jsx)("button",{onClick:()=>j(!0),className:"p-2 text-gray-600 hover:text-black hover:bg-gray-100 rounded-full transition-all relative",children:(0,a.jsx)(c.Z,{className:"h-5 w-5"})}),(0,a.jsx)(T,{}),(0,a.jsx)(R,{}),(0,a.jsx)("button",{className:"lg:hidden p-2",onClick:()=>t(!e),children:(0,a.jsx)(m.Z,{className:"h-5 w-5 text-gray-600"})})]})]}),s&&(0,a.jsx)("div",{className:"border-t border-gray-100 bg-gradient-to-r from-gray-50 to-white search-container shadow-sm",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[(0,a.jsxs)("form",{onSubmit:_,className:"relative group",children:[(0,a.jsx)("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 group-focus-within:text-black transition-colors",children:(0,a.jsx)(l.Z,{className:"h-5 w-5"})}),(0,a.jsx)("input",{type:"text",value:k,onChange:e=>Q(e.target.value),placeholder:"Search for products, brands, or categories...",className:"w-full pl-12 pr-24 py-4 bg-white border-2 border-gray-200 rounded-2xl text-sm    focus:outline-none focus:ring-4 focus:ring-black/5 focus:border-black    transition-all duration-200 shadow-sm hover:shadow-md   placeholder-gray-400 font-medium",autoFocus:!0}),(0,a.jsxs)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center gap-2",children:[k.trim()&&(0,a.jsx)("button",{type:"submit",className:"bg-black text-white px-4 py-2 rounded-xl text-xs font-semibold    hover:bg-gray-800 transition-colors shadow-sm",children:"Search"}),(0,a.jsx)("button",{type:"button",onClick:()=>{p(!1),S(""),P(!1)},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-all",children:(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),I&&C.length>0&&(0,a.jsx)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-100 rounded-2xl shadow-2xl max-h-96 overflow-hidden z-50 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"p-1",children:[(0,a.jsx)("div",{className:"px-4 py-3 border-b border-gray-50 bg-gray-50/50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Quick Results"}),(0,a.jsx)("span",{className:"text-xs text-gray-400 bg-gray-200 px-2 py-1 rounded-full",children:C.length})]})}),(0,a.jsx)("div",{className:"max-h-64 overflow-y-auto custom-scrollbar",children:C.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>Y(e.id),className:"w-full flex items-center p-4 hover:bg-gray-50 transition-all duration-150 text-left group border-b border-gray-50/50 last:border-b-0",children:[(0,a.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,a.jsx)("img",{src:e.image,alt:e.name,className:"w-14 h-14 object-cover rounded-xl shadow-sm group-hover:shadow-md transition-shadow"}),e.isNew&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full",children:"NEW"})]}),(0,a.jsxs)("div",{className:"ml-4 flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900 truncate group-hover:text-black",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-0.5",children:[e.brand," • ",e.category]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,a.jsxs)("p",{className:"text-sm font-bold text-black",children:["RM",e.price]}),(0,a.jsx)("div",{className:"text-xs text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"View Details →"})]})]})]},e.id))}),(0,a.jsx)("div",{className:"p-3 border-t border-gray-50 bg-gray-50/30",children:(0,a.jsx)("button",{onClick:_,className:"w-full py-3 text-center text-black font-semibold hover:bg-white rounded-xl transition-all duration-150 border border-transparent hover:border-gray-200 hover:shadow-sm",children:(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:['View all results for "',(0,a.jsx)("span",{className:"font-bold",children:k}),'"',(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})})]})}),I&&k.length>=2&&0===C.length&&(0,a.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-100 rounded-2xl shadow-2xl p-8 text-center z-50",children:[(0,a.jsx)("div",{className:"text-gray-300 mb-4",children:(0,a.jsx)("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(l.Z,{className:"h-8 w-8"})})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"No products found"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-1",children:['No results for "',(0,a.jsx)("span",{className:"font-medium",children:k}),'"']}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Try different keywords or check spelling"}),(0,a.jsx)("div",{className:"flex gap-2 justify-center",children:["Nike","Jackets","T-Shirts"].map(e=>(0,a.jsx)("button",{onClick:()=>Q(e),className:"text-xs bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-full text-gray-700 transition-colors",children:e},e))})]})]}),0===k.length&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-white/60 rounded-xl border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 items-center justify-center",children:[(0,a.jsx)("span",{className:"text-xs font-medium text-gray-600 mr-2",children:"\uD83D\uDD25 Trending:"}),[{term:"Nike",emoji:"\uD83D\uDC5F"},{term:"Jackets",emoji:"\uD83E\uDDE5"},{term:"T-Shirts",emoji:"\uD83D\uDC55"},{term:"Supreme",emoji:"\uD83D\uDCAF"}].map(e=>{let{term:t,emoji:s}=e;return(0,a.jsxs)("button",{onClick:()=>Q(t),className:"group text-xs bg-white hover:bg-black hover:text-white px-4 py-2 rounded-full text-gray-700 transition-all duration-200 border border-gray-200 hover:border-black shadow-sm hover:shadow-md font-medium",children:[(0,a.jsx)("span",{className:"mr-1",children:s}),t]},t)})]}),(0,a.jsx)("div",{className:"text-center mt-2",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 Tip: Try searching by brand, category, or product name"})})]})]})}),(0,a.jsx)(b,{isOpen:y,onClose:()=>j(!1)}),v&&(0,a.jsx)(M,{onClose:()=>w(!1)}),e&&(0,a.jsx)("div",{className:"lg:hidden py-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsx)("a",{href:"/",className:"text-gray-900 font-semibold hover:text-black",children:"HOME"}),(0,a.jsx)("a",{href:"/new-arrivals",className:"text-gray-900 font-semibold hover:text-black",children:"NEW ARRIVALS"}),(0,a.jsx)("a",{href:"/live-bidding",className:"text-gray-900 font-semibold hover:text-black",children:"BIDDING"}),(0,a.jsx)("a",{href:"/shop",className:"text-gray-900 font-semibold hover:text-black",children:"SHOP ALL"}),(0,a.jsx)("a",{href:"/sold-items",className:"text-gray-900 font-semibold hover:text-black",children:"SOLD ITEMS"}),(0,a.jsx)("a",{href:"/admin",className:"text-xs text-gray-400 hover:text-gray-600",children:"•"})]})})]})})}},3747:function(e,t,s){s.d(t,{J7:function(){return o},RB:function(){return a},YS:function(){return r},bd:function(){return l}});let a=[{id:"1",name:"Nike ACG Technical Jacket",price:1269,image:"https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=400",brand:"Nike",category:"Jackets",size:["S","M","L","XL"],color:"Black",inStock:!0,isNew:!0,totalStock:1,soldQuantity:0,createdAt:"2025-10-14T10:00:00Z",offers:[{id:"offer-1",userId:"user-sample-1",customerName:"Ahmad Rahman",customerEmail:"ahmad@email.com",customerPhone:"012-345-6789",offeredPrice:1e3,message:"Hi, can you consider RM1000 for this jacket? I really like it but my budget is tight.",status:"pending",createdAt:"2025-10-14T08:30:00Z"}]},{id:"2",name:"Stone Island Padded Jacket",price:4199,image:"https://images.unsplash.com/photo-1594633313593-bab3825d0caf?w=400",brand:"Stone Island",category:"Jackets",size:["M","L"],color:"Yellow",inStock:!0,isNew:!0,totalStock:1,soldQuantity:0,createdAt:"2025-10-13T15:30:00Z",offers:[{id:"offer-2",userId:"user-sample-2",customerName:"Siti Aisyah",customerEmail:"siti@email.com",customerPhone:"013-456-7890",offeredPrice:3500,message:"Would you accept RM3500? I can pay immediately.",status:"pending",createdAt:"2025-10-13T10:15:00Z"}]},{id:"3",name:"Comme Des Garcons Patchwork Tee",price:739,image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400",brand:"Comme Des Garcons",category:"T-Shirts",size:["S","M"],color:"Multi",inStock:!0,totalStock:1,soldQuantity:0,createdAt:"2025-10-15T09:00:00Z"},{id:"4",name:"Arc'teryx Beta Shell Jacket",price:5583,image:"https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=400",brand:"Arc'teryx",category:"Jackets",size:["M","L"],color:"Blue",inStock:!0,totalStock:1,soldQuantity:0,createdAt:"2025-10-08T10:00:00Z"},{id:"5",name:"Prada Sport Nylon Jacket",price:2469,image:"https://images.unsplash.com/photo-1525845859779-54d477ff291f?w=400",brand:"Prada",category:"Jackets",size:["S","M"],color:"Blue",inStock:!0,totalStock:1,soldQuantity:0,createdAt:"2025-10-12T16:00:00Z",offers:[{id:"offer-3",userId:"user-sample-3",customerName:"Kevin Lim",customerEmail:"kevin@email.com",customerPhone:"014-567-8901",offeredPrice:2200,status:"accepted",createdAt:"2025-10-12T14:20:00Z"}]},{id:"6",name:"Oakley Technical Sunglasses",price:1027,image:"https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=400",brand:"Oakley",category:"Accessories",size:["O/S"],color:"Black",inStock:!0,isSoldOut:!1,totalStock:1,soldQuantity:0},{id:"7",name:"Supreme x Stone Island Jacket",price:4776,image:"https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?w=400",brand:"Supreme",category:"Jackets",size:["S","M"],color:"Denim",inStock:!0,totalStock:1,soldQuantity:0},{id:"8",name:"Nike Gyakusou Track Jacket",price:739,image:"https://images.unsplash.com/photo-1556821840-3a63f95609a7?w=400",brand:"Nike",category:"Jackets",size:["S","M","L"],color:"Black",inStock:!0,totalStock:1,soldQuantity:0,createdAt:"2024-10-11T14:00:00Z"},{id:"9",name:"Issey Miyake Pleated Pants",price:912,image:"https://images.unsplash.com/photo-1473966968600-fa801b869a1a?w=400",brand:"Issey Miyake",category:"Pants",size:["30","32","34"],color:"Black",inStock:!0,isSoldOut:!1,totalStock:1,soldQuantity:0,createdAt:"2024-10-08T10:00:00Z"},{id:"10",name:"Maharishi Reflective Jacket",price:2700,image:"https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=400",brand:"Maharishi",category:"Jackets",size:["S","M"],color:"Olive",inStock:!0,totalStock:1,soldQuantity:0},{id:"11",name:"Oakley Software Cargo Shorts",price:566,image:"https://images.unsplash.com/photo-1473966968600-fa801b869a1a?w=400",brand:"Oakley",category:"Collection",size:["30","32","34"],color:"Blue",inStock:!0,totalStock:1,soldQuantity:0},{id:"12",name:"Prada Sport Mesh Jacket",price:2123,image:"https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=400",brand:"Prada",category:"Jackets",size:["6-8"],color:"Black",inStock:!0,totalStock:1,soldQuantity:0}],r=["Nike","Stone Island","Comme Des Garcons","Arc'teryx","Prada","Oakley","Supreme","Issey Miyake","Maharishi"],l=["Jackets","T-Shirts","Accessories","Pants","Collection"],o=["XS","S","M","L","XL","XXL","30","32","34","36","6-8","O/S"]},3222:function(e,t,s){s.d(t,{h:function(){return l}});var a=s(8078);let r={storeName:"Farid's Store",storeSlogan:"SELECTED ITEMS",contactEmail:"admin@rydstore.my",logoUrl:"/images/logo.jpg",heroTitle:"Farid's Store",heroSubtitle:"SELECTED ITEMS",currency:"RM",heroBackgroundImage:"",heroDescription:"Discover exclusive fashion pieces from top international brands. Curated collection from Kulim, Kedah with love.",phoneNumber:"+60174694966",maintenanceMode:!1,bankName:"Maybank",bankAccountNumber:"",bankAccountName:"",bankQrUrl:""};function l(){let[e,t]=(0,a.useState)(r),[s,l]=(0,a.useState)(!1),o=()=>{{let s=localStorage.getItem("siteSettings");if(s)try{var e;let a=JSON.parse(s),l=a.logoUrl?a:{...r,...a};console.log("\uD83D\uDCCB Loaded settings from localStorage:",{hasLogoUrl:!!l.logoUrl,logoUrlLength:(null===(e=l.logoUrl)||void 0===e?void 0:e.length)||0,storeName:l.storeName}),a.logoUrl||localStorage.setItem("siteSettings",JSON.stringify(l)),t(l)}catch(e){console.error("Error loading site settings:",e),t(r)}else console.log("ℹ️ No saved settings found, using defaults");l(!0)}};return(0,a.useEffect)(()=>{o();let e=e=>{"siteSettings"===e.key&&(console.log("\uD83D\uDD04 Settings changed, reloading..."),o())};window.addEventListener("storage",e);let t=()=>{console.log("\uD83D\uDD04 Settings updated in same tab, reloading..."),o()};return window.addEventListener("settingsUpdated",t),()=>{window.removeEventListener("storage",e),window.removeEventListener("settingsUpdated",t)}},[]),{settings:e,updateSettings:s=>{let a={...e,...s};t(a),localStorage.setItem("siteSettings",JSON.stringify(a)),console.log("\uD83D\uDCBE Settings updated:",s),window.dispatchEvent(new CustomEvent("settingsUpdated")),s.logoUrl&&s.logoUrl!==e.logoUrl&&(console.log("\uD83D\uDD04 Logo updated, clearing cache for mobile devices..."),window.dispatchEvent(new StorageEvent("storage",{key:"siteSettings",newValue:JSON.stringify(a),url:window.location.href})),setTimeout(()=>{document.querySelectorAll('img[src*="logo"], img[src*="data:image"]').forEach(e=>{let t=e.src.split("?")[0];e.src="".concat(t,"?v=").concat(Date.now())})},100))},isLoaded:s}}}}]);