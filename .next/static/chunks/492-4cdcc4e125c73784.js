"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[492],{5744:function(e,t,a){a.d(t,{AlertProvider:function(){return m},VY:function(){return g}});var r=a(7821),o=a(8078),s=a(2531),n=a(3955),i=a(2828),l=a(9419),c=a(3116);function u(e){let{isOpen:t,onClose:a,title:o,message:u,type:d,confirmText:m="OK",cancelText:g="Cancel",onConfirm:f,showCancel:h=!1}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4 backdrop-blur-sm animate-in fade-in-0 duration-200",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md transform transition-all animate-in fade-in-0 zoom-in-95 slide-in-from-bottom-4 duration-300",style:{animation:"bounce-in 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)"},children:[(0,r.jsxs)("div",{className:"".concat((()=>{switch(d){case"success":default:return"bg-black";case"error":return"bg-gray-800";case"warning":return"bg-gray-700";case"info":return"bg-gray-600"}})()," rounded-t-2xl p-6 text-center relative"),children:[(0,r.jsx)("button",{onClick:a,className:"absolute top-4 right-4 p-1 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors",children:(0,r.jsx)(c.Z,{className:"h-5 w-5 text-white"})}),(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("div",{className:"bg-white bg-opacity-20 rounded-full p-3",children:(()=>{switch(d){case"success":return(0,r.jsx)(s.Z,{className:"h-8 w-8 text-white"});case"error":return(0,r.jsx)(n.Z,{className:"h-8 w-8 text-white"});case"warning":return(0,r.jsx)(i.Z,{className:"h-8 w-8 text-white"});default:return(0,r.jsx)(l.Z,{className:"h-8 w-8 text-white"})}})()})}),(0,r.jsx)("h3",{className:"text-xl font-bold text-white",children:o})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("p",{className:"text-gray-700 text-center leading-relaxed mb-6",children:u}),(0,r.jsxs)("div",{className:"flex gap-3 ".concat(h?"justify-between":"justify-center"),children:[h&&(0,r.jsx)("button",{onClick:a,className:"flex-1 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium rounded-xl transition-colors border border-gray-200",children:g}),(0,r.jsx)("button",{onClick:()=>{f?f():a()},className:"".concat(h?"flex-1":"w-full"," px-4 py-3 bg-black hover:bg-gray-800 text-white font-medium rounded-xl transition-colors shadow-lg"),children:m})]})]})]})}):null}let d=(0,o.createContext)(void 0);function m(e){let{children:t}=e,[a,s]=(0,o.useState)({isOpen:!1,title:"",message:"",type:"info",confirmText:"OK",cancelText:"Cancel",showCancel:!1}),n=(0,o.useCallback)(e=>{s({isOpen:!0,title:e.title,message:e.message,type:e.type,confirmText:e.confirmText||"OK",cancelText:e.cancelText||"Cancel",onConfirm:e.onConfirm,showCancel:e.showCancel||!1})},[]),i=(0,o.useCallback)((e,t,a)=>{n({title:e,message:t,type:"success",onConfirm:a})},[n]),l=(0,o.useCallback)((e,t,a)=>{n({title:e,message:t,type:"error",onConfirm:a})},[n]),c=(0,o.useCallback)((e,t,a)=>{n({title:e,message:t,type:"warning",onConfirm:a})},[n]),m=(0,o.useCallback)((e,t,a)=>{n({title:e,message:t,type:"info",onConfirm:a})},[n]),g=(0,o.useCallback)(function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Confirm";n({title:e,message:t,type:"warning",onConfirm:a,showCancel:!0,confirmText:r})},[n]),f=(0,o.useCallback)(()=>{s(e=>({...e,isOpen:!1}))},[]),h=(0,o.useCallback)(()=>{a.onConfirm&&a.onConfirm(),f()},[a.onConfirm,f]);return(0,r.jsxs)(d.Provider,{value:{showAlert:n,showSuccess:i,showError:l,showWarning:c,showInfo:m,showConfirm:g},children:[t,(0,r.jsx)(u,{isOpen:a.isOpen,onClose:f,title:a.title,message:a.message,type:a.type,confirmText:a.confirmText,cancelText:a.cancelText,onConfirm:h,showCancel:a.showCancel})]})}let g=()=>{let e=(0,o.useContext)(d);if(!e)throw Error("useAlert must be used within an AlertProvider");return e}},6492:function(e,t,a){a.d(t,{H:function(){return i},a:function(){return l}});var r=a(7821),o=a(8078),s=a(5744);let n=(0,o.createContext)(null);function i(e){let{children:t}=e,[a,i]=(0,o.useState)(null),[l,c]=(0,o.useState)(!1),[u,d]=(0,o.useState)(!1),[m,g]=(0,o.useState)([]),[f,h]=(0,o.useState)(0),[S,p]=(0,o.useState)(!1),w=(0,s.VY)();(0,o.useEffect)(()=>{console.log("useAuth: Initializing...");{let e=localStorage.getItem("currentUser"),t=localStorage.getItem("authSession");if(console.log("useAuth: Saved user from localStorage:",e),console.log("useAuth: Session status:",t),e&&"active"===t)try{let t=JSON.parse(e);console.log("useAuth: Parsed user:",t);let a={...t,fullName:t.fullName||t.name,address:t.address||{street:"",city:"",state:"",postcode:"",country:"Malaysia"}};console.log("useAuth: Complete user:",a),i(a),d(!0),localStorage.setItem("currentUser",JSON.stringify(a)),console.log("useAuth: User authenticated successfully")}catch(e){console.error("useAuth: Error parsing saved user:",e),localStorage.removeItem("currentUser")}else console.log("useAuth: No active session, staying logged out"),i(null),d(!1)}let e=()=>{console.log("Notification update event received"),a&&v()};return window.addEventListener("notificationUpdated",e),p(!0),()=>{window.removeEventListener("notificationUpdated",e)}},[a]);let x=async(e,t)=>{let a=JSON.parse(localStorage.getItem("registeredUsers")||"[]").find(a=>a.email===e&&a.password===t);if(a){let e={id:a.id,name:a.name,fullName:a.fullName||a.name,email:a.email,phone:a.phone,address:a.address||{street:"",city:"",state:"",postcode:"",country:"Malaysia"},joinedDate:a.joinedDate};return i(e),d(!0),localStorage.setItem("currentUser",JSON.stringify(e)),localStorage.setItem("authSession","active"),w.showSuccess("Welcome Back!","Successfully logged in as ".concat(e.name)),!0}return!1},y=async(e,t,a,r)=>{let o=JSON.parse(localStorage.getItem("registeredUsers")||"[]");if(o.some(e=>e.email===t))return!1;let s={id:"user-"+Date.now(),name:e,fullName:e,email:t,phone:a,address:{street:"",city:"",state:"",postcode:"",country:"Malaysia"},password:r,joinedDate:new Date().toISOString()};o.push(s),localStorage.setItem("registeredUsers",JSON.stringify(o));let n={id:s.id,name:s.name,fullName:s.fullName,email:s.email,phone:s.phone,address:s.address,joinedDate:s.joinedDate};return i(n),d(!0),localStorage.setItem("currentUser",JSON.stringify(n)),localStorage.setItem("authSession","active"),!0},v=()=>{if(!a)return;let e=JSON.parse(localStorage.getItem("notifications_".concat(a.id))||"[]");g(e),h(e.filter(e=>!e.isRead).length)},b=async e=>{if(!a)return!1;try{let t=JSON.parse(localStorage.getItem("registeredUsers")||"[]").map(t=>t.id===a.id?{...t,...e}:t);localStorage.setItem("registeredUsers",JSON.stringify(t));let r={...a,...e};return i(r),localStorage.setItem("currentUser",JSON.stringify(r)),localStorage.setItem("authSession","active"),!0}catch(e){return console.error("Error updating profile:",e),!1}},N=async(e,t)=>{try{let r=JSON.parse(localStorage.getItem("registeredUsers")||"[]"),o=r.findIndex(t=>t.email===e);if(-1===o)return console.error("User not found with email:",e),!1;return r[o].password=t,localStorage.setItem("registeredUsers",JSON.stringify(r)),a&&a.email===e&&localStorage.setItem("authSession","active"),w.showSuccess("Password Reset","Your password has been updated. Please sign in with the new password."),!0}catch(e){return console.error("Error resetting password:",e),!1}};return(0,o.useEffect)(()=>{v()},[a]),(0,r.jsx)(n.Provider,{value:{user:a,isAuthenticated:u,isInitialized:S,notifications:m,unreadCount:f,login:x,register:y,logout:()=>{let e=(null==a?void 0:a.name)||"User";w.showAlert({title:"Confirm Logout",message:"Are you sure you want to logout, ".concat(e,"?"),type:"warning",showCancel:!0,confirmText:"Logout",cancelText:"Stay",onConfirm:()=>{(null==a?void 0:a.id)&&(localStorage.removeItem("favorites_".concat(a.id)),localStorage.removeItem("notifications_".concat(a.id)),localStorage.removeItem("cart_".concat(a.id))),i(null),d(!1),g([]),h(0),localStorage.removeItem("currentUser"),localStorage.setItem("authSession","inactive"),localStorage.removeItem("favorites"),localStorage.removeItem("cartItems"),setTimeout(()=>{w.showInfo("Logged Out","Goodbye ".concat(e,"! See you soon."))},100)}})},resetPassword:N,showAuthModal:l,setShowAuthModal:c,markNotificationAsRead:e=>{if(!a)return;let t=JSON.parse(localStorage.getItem("notifications_".concat(a.id))||"[]").map(t=>t.id===e?{...t,isRead:!0}:t);localStorage.setItem("notifications_".concat(a.id),JSON.stringify(t)),g(t),h(t.filter(e=>!e.isRead).length)},clearNotifications:()=>{a&&(localStorage.removeItem("notifications_".concat(a.id)),g([]),h(0))},refreshNotifications:v,addNotification:e=>{if(!a)return;let t={...e,id:"notification_"+Date.now(),userId:a.id,isRead:!1,createdAt:new Date().toISOString()};console.log("\uD83D\uDCE8 Adding new notification:",t);let r=[t,...JSON.parse(localStorage.getItem("notifications_".concat(a.id))||"[]")];localStorage.setItem("notifications_".concat(a.id),JSON.stringify(r)),g(r),h(r.filter(e=>!e.isRead).length),window.dispatchEvent(new Event("notificationUpdated"))},updateProfile:b},children:t})}function l(){let e=(0,o.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}}}]);